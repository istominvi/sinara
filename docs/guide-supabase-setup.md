# Настройка Supabase

## Бесплатный старт (Supabase Cloud Free Tier)

1. Зарегистрируйтесь в Supabase Cloud: перейдите на https://supabase.com и создайте аккаунт.
2. Создайте новый проект:
   - Нажмите **New project**.
   - Укажите организацию, название проекта, пароль для базы данных и регион.
3. Сохраните реквизиты проекта:
   - **Project URL** (URL проекта).
   - **Anon key** (публичный ключ для клиентского доступа).
   - **Service role key** (приватный ключ для серверных операций).

Эти данные находятся в настройках проекта: **Project Settings → API**. Держите **Service role key** в секрете и используйте только на сервере.

## Локальный запуск для разработки (Supabase CLI)

1. Установите Supabase CLI:
   - Через npm: `npm install -g supabase`
   - Или через Homebrew: `brew install supabase/tap/supabase`
2. Инициализируйте проект:
   ```bash
   supabase init
   ```
3. Запустите локальную среду:
   ```bash
   supabase start
   ```
4. Примените миграции (если они не применились автоматически):
   ```bash
   supabase db reset
   ```

Команда `supabase start` поднимает локальные сервисы Supabase в Docker. Убедитесь, что Docker установлен и запущен.

## Как применить миграции из `supabase/migrations/*.sql`

Миграции автоматически применяются при `supabase db reset` или `supabase start` (если есть новые файлы).

Если нужно применить миграции вручную:

```bash
supabase db reset
```

Команда очистит локальную базу данных, заново создаст схему и применит все файлы из `supabase/migrations/*.sql` в хронологическом порядке.

## Рекомендации по VDS для self-hosting

Минимальные требования:
- 2 vCPU
- 4–8 GB RAM
- SSD 40+ GB

Варианты провайдеров:
- Hetzner
- Selectel
- Timeweb
- AWS Lightsail

Self-hosting требует администрирования: настройка PostgreSQL, резервного копирования, обновлений и мониторинга. Это сложнее и дороже в обслуживании на старте, чем облачный вариант.

## Краткое сравнение

- **Supabase Cloud**: проще, быстрее и дешевле на старте.
- **VDS/self-hosting**: нужен для полного контроля, кастомизации и долгосрочной оптимизации затрат.
